<!DOCTYPE html>
<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css?v=1.1">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap" rel="stylesheet">
    <meta charset="UTF-8">

    <script>
        function checkboxlimit(checkgroup, limit){
            var checkgroup=checkgroup
            var limit=limit
            for (var i=0; i<checkgroup.length; i++){
                checkgroup[i].onclick=function(){
                var checkedcount=0
                for (var i=0; i<checkgroup.length; i++)
                    checkedcount+=(checkgroup[i].checked)? 1 : 0
                if (checkedcount>limit){
                    alert("You can only select a maximum of "+limit+" languages")
                    this.checked=false
                    }
                }
            }
        }
    </script>


</head>
<html>
<body>
    <script>
        function submit_form() {
            const queryString = window.location.search;
            console.log(queryString);
            const urlParams = new URLSearchParams(queryString);
            const deck = urlParams.get('deck')
            const subject = urlParams.get('subject')
            var langs = []
            var checkboxes = document.querySelectorAll('input[type=checkbox]:checked')

            for (var i = 0; i < checkboxes.length; i++) {
                langs.push(checkboxes[i].value)
            }
            console.log("langs "+ langs)
            window.open("team.html?deck="+deck+"&subject="+ subject+"&lang_one="+langs[0]+"&lang_two="+langs[1], "_self");
        }
    </script>
    <div class="main_block">
        <h3>The cards will have two languages ðŸ¤¯</h3>
        <h1>Please choose 2 most popular languages in your group!</h1>
        <form id="langs_form" name="langs_form">
            <input type="checkbox" name="langs" value="en"/><span> English ðŸ‡ºðŸ‡¸</span><br />
            <input type="checkbox" name="langs" value="es"/><span> Spanish ðŸ‡ªðŸ‡¸</span><br />
            <input type="checkbox" name="langs" value="ma"/><span> Mandarin ðŸ‡¨ðŸ‡³</span><br />
        </form>
        <button class="control_button" onclick="submit_form()"> ðŸ¥³ðŸ¤©ðŸ˜µ </button>
        <script>
            checkboxlimit(document.forms.langs_form.langs, 2)
        </script>
    </div>
</body>
</html>